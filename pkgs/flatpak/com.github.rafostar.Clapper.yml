app-id: com.github.rafostar.Clapper
runtime: org.gnome.Platform
runtime-version: 3.38
sdk: org.gnome.Sdk
command: com.github.rafostar.Clapper
finish-args:
  - --share=ipc
  - --socket=fallback-x11
  - --socket=wayland
  - --device=dri
  - --filesystem=xdg-config/clapper
  - --socket=pulseaudio
  - --share=network
  - --env=GST_PLUGIN_PATH=/app/lib/codecs/lib/gstreamer-1.0
  - --env=GST_VAAPI_ALL_DRIVERS=1

modules:
  - codecs/liba52.json
  - codecs/libmpeg2.json
  - codecs/libdvdcss.json
  - codecs/libdvdread.json
  - codecs/libdvdnav.json
  - codecs/libass.json
  - codecs/ffmpeg.json
  - codecs/gst-plugins-bad.json
  - codecs/gst-plugins-ugly.json
  - codecs/gst-libav.json
  - codecs/gst-vaapi.json
  - name: clapper
    buildsystem: meson
    sources:
      - type: git
        url: https://github.com/Rafostar/clapper.git
        commit: ac06e84851a592a2536e799c7d381796ef81d758

cleanup-commands:
  - mv /app/lib/libdvd*.* /app/lib/liba52*.* /app/lib/codecs/lib/
  - mv /app/lib/libass.* /app/lib/codecs/lib/
  - mkdir -p /app/lib/ffmpeg
